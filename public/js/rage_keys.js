// Generated by CoffeeScript 1.7.1
(function() {
  var e_km;

  ENGINE.Key_Manager = (function() {
    var percent_chance;

    function Key_Manager() {}

    Key_Manager.ks = void 0;

    Key_Manager.lock = false;

    Key_Manager.pressed_keys = [];

    Key_Manager.keydown = function(event) {
      var key;
      key = event.key || event.keyCode || event.which;
      if (key === 8 || key === 9 || key === 91) {
        event.preventDefault();
      }
      e_km.handle_key_down(key);
      return false;
    };

    Key_Manager.keyup = function(event) {
      var key;
      key = event.key || event.keyCode || event.which;
      e_km.handle_key_up(key);
      return false;
    };

    Key_Manager.enough_keys_pressed = function() {
      return this.pressed_keys.length > 3;
    };

    Key_Manager.handle_key_up = function(key) {
      return this.pressed_keys = _.reject(this.pressed_keys, function(elem) {
        return elem === key;
      });
    };

    percent_chance = function(percent) {
      return _.random(0, 100) <= percent;
    };

    Key_Manager.handle_key_down = function(key) {
      var letter;
      this.pressed_keys.push(key);
      letter = this.string_for_key(key);
      return ENGINE.rage_letters.add(ENGINE.Rage_Letter, {
        lifespan: 2,
        letter: letter
      }).add_random_modifier();
    };

    Key_Manager.rage_letter_count = function() {
      return ENGINE.rage_letters.length;
    };

    Key_Manager.string_for_key = function(key) {
      var str;
      str = "foo";
      if ((48 <= key && key <= 90)) {
        str = String.fromCharCode(key);
      } else {
        str = "F";
      }
      return str;
    };

    return Key_Manager;

  })();

  e_km = ENGINE.Key_Manager;

  window.noCode = {};

}).call(this);
